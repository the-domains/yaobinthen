<!DOCTYPE html>
<html dir="ltr" lang="en"><head><title>polling in relay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="generator" content="The Grid the-composer/ds-nick-jones/0.0.105">
  <meta name="the-grid-solution" content="a89c5ca8-5644-498f-9f87-93cb8fb837da">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.9.1/polyfill.js"></script>
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/assets/styles/css/style.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/assets/styles/css/animations.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/assets/styles/css/props.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/assets/styles/css/focalpoint.css" type="text/css" />
  <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/ds-nick-jones-components.dist.min.js"></script>
  <style id="web-font-binder" type="text/css">html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }</style><script type="text/javascript" role="google-analytics">
    (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-73797886-1', 'auto');
    ga('send', 'pageview');
    </script><meta property="og:site_name" content="yaobinthen | tech blog"/><link rel="alternate" type="application/rss+xml" title="RSS" href="./rss.xml"/></head><body><div id="app" data-reactroot="" data-reactid="1" data-react-checksum="-1796130743"><div id="wrapper" class="System color-bg m-t-4 Brockmann section-h-padding-small section-v-padding-small hero-transition-none  colors-light colors-global " data-reactid="2"><span style="display:hidden;" data-reactid="3"></span><section id="0" class="Section Section--components-1 Section--list Section--nav title-size-medium p-0 ls-p-3  colors-light colors-global " data-reactid="4"><div class="Component p-l-1 p-r-3 ls-p-h-1 ls-fx-r j-c-between Nav--list-row color-box color-text-pop bx-sh-soft" data-reactid="5"><!-- react-empty: 6 --><div class="Site-title color-text-pop pos-r t-2rem ls-t-1rem w-s-wrap ls-w-s-nowrap f-s-s ls-f-s-m z-20" data-reactid="7"><span data-reactid="8"><!-- react-empty: 9 --><a data-reactid="10">polling in relay</a></span></div><!-- react-text: 11 --><!-- /react-text --></div></section><div class="min-h-80vh" data-reactid="12"><section id="1" class="Section Section--components-1 color-title title-size-medium p-0 ls-p-h-13vw ls-p-v-3  color-bg text-align-center  colors-dark colors-global " data-reactid="13"><div class="Component p-1 " data-reactid="14"><div class="Group Group--column min-w-240px p-1 m-a" data-reactid="15"><!-- react-empty: 16 --><div class="System-font ls-max-w-0 Headline" data-reactid="17"><h1 data-reactid="18"><span class="" data-reactid="19"><span class="font-title" data-reactid="20">yaobinthen | tech blog</span></span></h1></div><!-- react-empty: 21 --><!-- react-empty: 22 --></div></div></section><section id="2" class="Section Section--article color-title color-text w-100p p-1  color-bg  colors-vibrant colors-global " data-reactid="23"><div class="Component max-w-768px m-a pos-r" data-reactid="24"><p>Click inside to see how I managed to do polling in Relay.</p><p>Recently I have been working on a chat related app using Relay + React Native, and came across a problem that has been a show blocker for a week.</p><p>Relay has been designed for infinite scrolling rather than pagination. Due to this nature, getting previous chats were easy, but not for getting newest messages. When you get current available messages, Relay assumes there's no more newer messages. An obvious example is Facebook, you can scroll indefinitely down, but you tends to refresh the page to get the back to the top for newer feeds.</p><p>However it is not ideal to trigger a <i>forceFetch</i> to get all the data again especially on a mobile device.</p><p>After a week of struggle, the answer was actually quite obvious, which is to use another field, <i>newMessages</i> which returns a list of new messages given a timestamp, together with the original <i>messagesConnection</i> which returns the messages during first load and messages in the past. By having Relay to return two array of data, I have to maintain a copy of the combined data to be displayed.</p><p>Now, to poll for new messages, I simply supply the timestamp to <i>newMessages </i>at an interval, using Relay's <i>setVariables.</i></p><p>See this <a href="http://stackoverflow.com/questions/35129716/how-to-fetch-for-new-edge-using-polling-method">stackoverflow post</a> for more technical detail.</p></div></section></div><section id="3" class="Section Section--components-2 Section--footer color-bg color-title z-30 p-1 ls-p-h-2vw  colors-dark colors-global " data-reactid="25"><div class="fx-1 bd-none ls-bd-r ls-bd-w-1" data-reactid="26"><div class="Group Group-heading ls-p-r-4" data-reactid="27"><div class="Site-title color-text-pop" data-reactid="28"><span data-reactid="29"><!-- react-empty: 30 --><h2 data-reactid="31"><a data-reactid="32">polling in relay</a></h2></span></div></div></div><div class="fx-1" data-reactid="33"><div class="Group Group--links" data-reactid="34"><div class="Group Group--links f-s-m ls-f-s-s w-s-wrap ls-w-s-nowrap" data-reactid="35"></div></div></div><div data-reactid="36"></div></section></div></div>
    <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/assets/scripts/placeholder.js"></script>
    <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/assets/scripts/hero-transition.js"></script>
  <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.105/assets/scripts/navList.js"></script><script id="pageReactInitState">window.pageReactInitState = {"globalComponentsKey":"dsNickJones","items":{"site-navigation-item":{"id":"site-navigation-item","index":0,"metadata":{"@type":"navigation","starred":true},"content":[{"id":"site-navigation-block","type":"navigation","html":"","metadata":{"starred":true},"navigation":[{"href":"index.html","title":"yaobinthen | tech blog","rel":"home","type":"MainPage"}]}]},"header-item-0":{"id":"header-item-0","index":1,"metadata":{"@type":"header","starred":true},"content":[{"id":"cta-title-1","type":"h1","html":"<h1>yaobinthen | tech blog</h1>","metadata":{"starred":true},"text":"yaobinthen | tech blog"}]},"f95eb703-210c-49b3-beb0-15704f2a05d3":{"id":"f95eb703-210c-49b3-beb0-15704f2a05d3","index":2,"created_by":"1c161a74-ba5e-40fe-af58-68372397d9f5","updated_by":"1c161a74-ba5e-40fe-af58-68372397d9f5","created_at":"2016-02-16T08:52:04.988Z","updated_at":"2016-02-28T07:55:49.706Z","published":true,"score":0,"path":"_posts/2016-02-16-polling-in-relay.md","_title":"polling in relay","metadata":{"@type":"Article","url":"polling-in-relay/index.html","inLanguage":null,"starred":false,"inFeed":true,"hasPage":true,"inNav":false,"title":"polling in relay","description":"implementing polling in relayjs","keywords":[]},"content":[{"id":"40ce518b-daed-4b5c-b990-f2992eb9403d","item":"f95eb703-210c-49b3-beb0-15704f2a05d3","type":"text","html":"<p>Click inside to see how I managed to do polling in Relay.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Click inside to see how I managed to do polling in Relay."},{"id":"be453fbc-bd13-4474-88ac-d250bb7833a9","item":"f95eb703-210c-49b3-beb0-15704f2a05d3","type":"text","html":"<p>Recently I have been working on a chat related app using Relay + React Native, and came across a problem that has been a show blocker for a week.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Recently I have been working on a chat related app using Relay + React Native, and came across a problem that has been a show blocker for a week."},{"id":"c000b282-d7a0-44f4-8ac3-93555f3e9ca0","item":"f95eb703-210c-49b3-beb0-15704f2a05d3","type":"text","html":"<p>Relay has been designed for infinite scrolling rather than pagination. Due to this nature, getting previous chats were easy, but not for getting newest messages. When you get current available messages, Relay assumes there's no more newer messages. An obvious example is Facebook, you can scroll indefinitely down, but you tends to refresh the page to get the back to the top for newer feeds.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Relay has been designed for infinite scrolling rather than pagination. Due to this nature, getting previous chats were easy, but not for getting newest messages. When you get current available messages, Relay assumes there's no more newer messages. An obvious example is Facebook, you can scroll indefinitely down, but you tends to refresh the page to get the back to the top for newer feeds."},{"id":"a1094205-41e1-4db3-916b-8205bddbd71d","item":"f95eb703-210c-49b3-beb0-15704f2a05d3","type":"text","html":"<p>However it is not ideal to trigger a <i>forceFetch</i> to get all the data again especially on a mobile device.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"However it is not ideal to trigger a forceFetch to get all the data again especially on a mobile device."},{"id":"a0110561-9e7e-45df-b9ef-48152bb77b76","item":"f95eb703-210c-49b3-beb0-15704f2a05d3","type":"text","html":"<p>After a week of struggle, the answer was actually quite obvious, which is to use another field, <i>newMessages</i> which returns a list of new messages given a timestamp, together with the original <i>messagesConnection</i> which returns the messages during first load and messages in the past. By having Relay to return two array of data, I have to maintain a copy of the combined data to be displayed.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"After a week of struggle, the answer was actually quite obvious, which is to use another field, newMessages which returns a list of new messages given a timestamp, together with the original messagesConnection which returns the messages during first load and messages in the past. By having Relay to return two array of data, I have to maintain a copy of the combined data to be displayed."},{"id":"3a772d5f-e325-4033-ba3d-6e0e54dfc55a","item":"f95eb703-210c-49b3-beb0-15704f2a05d3","type":"text","html":"<p>Now, to poll for new messages, I simply supply the timestamp to <i>newMessages </i>at an interval, using Relay's <i>setVariables.</i></p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now, to poll for new messages, I simply supply the timestamp to newMessages at an interval, using Relay's setVariables."},{"id":"8939e0b8-874d-4b84-86dd-12c9e6b728bf","item":"f95eb703-210c-49b3-beb0-15704f2a05d3","type":"text","html":"<p>See this <a href=\"http://stackoverflow.com/questions/35129716/how-to-fetch-for-new-edge-using-polling-method\">stackoverflow post</a> for more technical detail.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"See this stackoverflow post for more technical detail."}]},"site-footer-item":{"id":"site-footer-item","index":3,"metadata":{"@type":"footer","starred":true},"content":[{"id":"site-footer-block","type":"footer","html":"","metadata":{"starred":true},"footer":{"rss":{"href":"rss.xml","rel":"alternate","title":"yaobinthen | tech blog RSS","type":"application/rss+xml"}}}]}},"sections":[{"componentId":"ArticleSiteHeaderFallback","itemsToRenderIds":["header-item-0"],"contracts":{"the-beautician":{"$item_index":1,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-none"]}},"$class":["group-graphical-shape-none","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","header-item-0","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","ArticleSiteHeaderFallback"]},"the-colorist":{"$item_index":1,"colorverse":{"colors-solution":{"$class":["colors-dark"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-dark","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":false,"isDark":true,"lightnessClass":"is-dark","base":{"r":114,"g":24,"b":23},"bg":{"r":40,"g":22,"b":21},"box":{"r":40,"g":22,"b":21},"boxShadow":{"r":0,"g":0,"b":0,"a":0.3},"boxPop":{"r":11,"g":110,"b":79},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":250,"g":159,"b":66},"boxPop2Text":{"r":0,"g":0,"b":0},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":0,"g":0,"b":0},"boxPopMostVibrant":{"r":54,"g":226,"b":172},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":255,"g":255,"b":255},"selection":{"r":226,"g":57,"b":54,"a":0.5},"header":{"r":40,"g":22,"b":21},"zebraStripe":{"r":43,"g":25,"b":24},"line":{"r":56,"g":38,"b":37},"mediaBorder":{"css":"1px solid hsl(3, 20%, 18%)","width":1,"type":"solid","color":{"r":56,"g":38,"b":37}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.4},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.4)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.4},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":229,"g":229,"b":230},"title2":{"r":172,"g":167,"b":167},"subTitle":{"r":104,"g":86,"b":85},"text":{"r":251,"g":234,"b":234},"text2":{"r":188,"g":170,"b":170},"textShadow":{"r":20,"g":11,"b":11,"a":0.5},"textShadowProps":{"color":{"r":20,"g":11,"b":11,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":251,"g":174,"b":96},"textPop2":{"r":152,"g":149,"b":158},"meta":{"r":104,"g":86,"b":85},"metaHover":{"r":121,"g":100,"b":99},"icon":{"r":251,"g":174,"b":96},"iconSelected":{"r":251,"g":174,"b":96},"iconOver":{"r":251,"g":174,"b":96},"palette":[{"r":114,"g":24,"b":23},{"r":250,"g":159,"b":66},{"r":11,"g":110,"b":79},{"r":224,"g":224,"b":226},{"r":152,"g":149,"b":158}]}},"the-lensman":{"filter":{"$class":["passthrough"],"graph":"passthrough","config":null}},"itemsClasses":["header-item-0","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["ArticleSiteHeaderFallback"]},"sectionIndex":0},{"componentId":"ArticleFallback","itemsToRenderIds":["f95eb703-210c-49b3-beb0-15704f2a05d3"],"contracts":{"the-beautician":{"$item_index":2,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-circle"]}},"$class":["group-graphical-shape-circle","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","f95eb703-210c-49b3-beb0-15704f2a05d3","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","ArticleFallback"]},"the-colorist":{"$item_index":2,"colorverse":{"colors-solution":{"$class":["colors-vibrant"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-vibrant","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":250,"g":159,"b":66},"bg":{"r":255,"g":158,"b":61},"box":{"r":250,"g":159,"b":66},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":134,"g":6,"b":3},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":3,"g":119,"b":83},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":134,"g":6,"b":3},"boxPopMostVibrantText":{"r":255,"g":255,"b":255},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":12,"g":192,"b":135,"a":0.5},"header":{"r":252,"g":159,"b":65},"zebraStripe":{"r":246,"g":157,"b":65},"line":{"r":232,"g":147,"b":61},"mediaBorder":{"css":"1px solid hsl(30, 79%, 57%)","width":1,"type":"solid","color":{"r":232,"g":147,"b":61}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":106,"g":23,"b":22},"title2":{"r":255,"g":255,"b":255},"subTitle":{"r":175,"g":111,"b":46},"text":{"r":63,"g":14,"b":13},"text2":{"r":63,"g":14,"b":13},"textShadow":{"r":253,"g":207,"b":161,"a":0.5},"textShadowProps":{"color":{"r":253,"g":207,"b":161,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":125,"g":80,"b":33},"textPop2":{"r":125,"g":80,"b":33},"meta":{"r":175,"g":111,"b":46},"metaHover":{"r":197,"g":125,"b":52},"icon":{"r":125,"g":80,"b":33},"iconSelected":{"r":125,"g":80,"b":33},"iconOver":{"r":125,"g":80,"b":33},"palette":[{"r":114,"g":24,"b":23},{"r":250,"g":159,"b":66},{"r":11,"g":110,"b":79},{"r":224,"g":224,"b":226},{"r":152,"g":149,"b":158}]}},"the-lensman":{"filter":{"$class":["passthrough"],"graph":"passthrough","config":null}},"itemsClasses":["f95eb703-210c-49b3-beb0-15704f2a05d3","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["ArticleFallback"]},"sectionIndex":1}],"contracts":{"the-typographer":{"typography":{"fonts":{"display":{"$formality":0.09090909090909083,"$type":["slab","egyptian"],"$weight":2,"$width":2,"$xheight":2,"$contrast":2,"$caps":"normal","family":"Roboto Slab","name":"Roboto Slab","foundry":"google","license":"apache","similar_to":["Sanchez","Calvert"],"description":"Roboto has a dual nature. It has a mechanical skeleton and the forms are\nlargely geometric. At the same time, the font features friendly and open\ncurves. While some grotesks distort their letterforms to force a rigid rhythm,\nRoboto doesn’t compromise, allowing letters to be settled into their natural\nwidth. This makes for a more natural reading rhythm more commonly found in\nhumanist and serif types.","links":["https://www.google.com/fonts/specimen/Roboto+Slab","https://www.typewolf.com/site-of-the-day/fonts/roboto-slab"],"normal":4,"bold":7},"screen":{"normal":4,"bold":7,"$formality":-0.09090909090909094,"$type":["sans","grotesque"],"$caps":"normal","foundry":"google","family":"Roboto","name":"Roboto","license":"apache","tags":["sans serif"],"description":"Roboto is an open-source, grotesque sans-serif typeface designed by Christian Robertson in 2011 and released through Google. Despite being accused of being a “frankenfont” mashup of DIN and Helvetica, I’m personally quite fond of Roboto. I think it renders crisply on screens and is very legible, even at smaller sizes. Roboto is the default font used in Google Maps and Google+."}},"styles":"html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }","webfontconfig":{"google":{"families":["Roboto Slab:400,700","Roboto:400,400italic,700,700italic"]}}},"htmlStyleTagContent":"html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Roboto Slab', 'Georgia', 'Times New Roman', 'Times', 'serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }","htmlScriptTagContent":"\n      if (window.WebFont) {\n        WebFont.load({\"google\":{\"families\":[\"Roboto Slab:400,700\",\"Roboto:400,400italic,700,700italic\"]}});\n      }\n    "},"the-beautician":{"$item_index":0,"siteBeautyverse":{"design-style":{"$class":["Brockmann"]},"section-h-padding":{"$class":["section-h-padding-small"]},"section-v-padding":{"$class":["section-v-padding-small"]},"hero-transition":{"$class":["hero-transition-none"]}},"$class":["hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:w-multiple-item"]},"the-colorist":{"$item_index":0,"colorverse":{"colors-solution":{"$class":["colors-light"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-light","site:w-multiple-item"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":224,"g":224,"b":226},"bg":{"r":234,"g":234,"b":235},"box":{"r":242,"g":242,"b":243},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":250,"g":159,"b":66},"boxPopText":{"r":0,"g":0,"b":0},"boxPop2":{"r":114,"g":24,"b":23},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":0,"g":0,"b":0},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":54,"g":226,"b":172},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":54,"g":226,"b":172,"a":0.5},"header":{"r":240,"g":240,"b":241},"zebraStripe":{"r":239,"g":239,"b":240},"line":{"r":229,"g":225,"b":226},"mediaBorder":{"css":"1px solid hsl(345, 7%, 89%)","width":1,"type":"solid","color":{"r":229,"g":225,"b":226}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":9,"g":93,"b":66},"title2":{"r":79,"g":138,"b":119},"subTitle":{"r":189,"g":174,"b":174},"text":{"r":63,"g":14,"b":13},"text2":{"r":153,"g":128,"b":128},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":11,"g":110,"b":79},"textPop2":{"r":152,"g":149,"b":158},"meta":{"r":189,"g":174,"b":174},"metaHover":{"r":163,"g":143,"b":143},"icon":{"r":11,"g":110,"b":79},"iconSelected":{"r":11,"g":110,"b":79},"iconOver":{"r":11,"g":110,"b":79},"palette":[{"r":114,"g":24,"b":23},{"r":250,"g":159,"b":66},{"r":11,"g":110,"b":79},{"r":224,"g":224,"b":226},{"r":152,"g":149,"b":158}]}}},"siteData":{"id":"a2d98b0d-aebc-4d7a-932e-22d79388cb90","ordered":true,"site":"the-domains/yaobinthen","title":"polling in relay","navigable":false,"type":"permalink","siteUrl":"http://yaobinthen.com/","siteId":"384dbef5-59f8-4392-b628-fbce9afec917","user":"1c161a74-ba5e-40fe-af58-68372397d9f5","config":{"name":"yaobinthen","title":"yaobinthen | tech blog","style":"the-composer","favicon":null,"cta":{"domain":null,"bucket":null,"version":null},"analytics":{"google":"UA-73797886-1","facebook":null,"twitter":null},"opengraph":{"image":null,"type":null,"appId":null},"collections":[{"index":{"path":"/","number":15,"navigable":true,"paginate":true},"feed":{"path":"/rss.xml","format":"rss","number":10},"permalink":{"path":"/:title/"}}],"color":{"brandColors":["#721817","#fa9f42","#0b6e4f","#e0e0e2","#98959e"],"brandStrength":1,"lightness":0.5,"saturation":0.75,"rhythmicContrast":1},"layout_spectrum":0.61624,"typography_spectrum":0.63908},"navigation":[{"href":"index.html","title":"yaobinthen | tech blog","rel":"home","type":"MainPage"}],"links":[{"href":"rss.xml","rel":"alternate","title":"yaobinthen | tech blog RSS","type":"application/rss+xml"}]},"navigation":{"componentId":"NavListRowClipped","itemsToRenderIds":["site-navigation-item"],"contracts":{"the-beautician":{"$item_index":0,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-none"]}},"$class":["group-graphical-shape-none","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site-navigation-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-navigation","NavListRowClipped"]},"the-colorist":{"$item_index":0,"colorverse":{"colors-solution":{"$class":["colors-light"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-light","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":224,"g":224,"b":226},"bg":{"r":234,"g":234,"b":235},"box":{"r":242,"g":242,"b":243},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":250,"g":159,"b":66},"boxPopText":{"r":0,"g":0,"b":0},"boxPop2":{"r":114,"g":24,"b":23},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":0,"g":0,"b":0},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":54,"g":226,"b":172},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":54,"g":226,"b":172,"a":0.5},"header":{"r":240,"g":240,"b":241},"zebraStripe":{"r":239,"g":239,"b":240},"line":{"r":229,"g":225,"b":226},"mediaBorder":{"css":"1px solid hsl(345, 7%, 89%)","width":1,"type":"solid","color":{"r":229,"g":225,"b":226}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":9,"g":93,"b":66},"title2":{"r":79,"g":138,"b":119},"subTitle":{"r":189,"g":174,"b":174},"text":{"r":63,"g":14,"b":13},"text2":{"r":153,"g":128,"b":128},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":11,"g":110,"b":79},"textPop2":{"r":152,"g":149,"b":158},"meta":{"r":189,"g":174,"b":174},"metaHover":{"r":163,"g":143,"b":143},"icon":{"r":11,"g":110,"b":79},"iconSelected":{"r":11,"g":110,"b":79},"iconOver":{"r":11,"g":110,"b":79},"palette":[{"r":114,"g":24,"b":23},{"r":250,"g":159,"b":66},{"r":11,"g":110,"b":79},{"r":224,"g":224,"b":226},{"r":152,"g":149,"b":158}]}},"the-lensman":{"filter":{"$class":["passthrough"],"graph":"passthrough","config":null}},"itemsClasses":["site-navigation-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-navigation"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["NavListRowClipped"]}},"footer":{"componentId":"Footer3col","itemsToRenderIds":["site-footer-item"],"contracts":{"the-beautician":{"$item_index":3,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-circle"]}},"$class":["group-graphical-shape-circle","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site-footer-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-footer","Footer3col"]},"the-colorist":{"$item_index":3,"colorverse":{"colors-solution":{"$class":["colors-dark"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-dark","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":false,"isDark":true,"lightnessClass":"is-dark","base":{"r":114,"g":24,"b":23},"bg":{"r":40,"g":22,"b":21},"box":{"r":40,"g":22,"b":21},"boxShadow":{"r":0,"g":0,"b":0,"a":0.3},"boxPop":{"r":11,"g":110,"b":79},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":250,"g":159,"b":66},"boxPop2Text":{"r":0,"g":0,"b":0},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":0,"g":0,"b":0},"boxPopMostVibrant":{"r":54,"g":226,"b":172},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":255,"g":255,"b":255},"selection":{"r":226,"g":57,"b":54,"a":0.5},"header":{"r":40,"g":22,"b":21},"zebraStripe":{"r":43,"g":25,"b":24},"line":{"r":56,"g":38,"b":37},"mediaBorder":{"css":"1px solid hsl(3, 20%, 18%)","width":1,"type":"solid","color":{"r":56,"g":38,"b":37}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.4},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.4)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.4},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":229,"g":229,"b":230},"title2":{"r":172,"g":167,"b":167},"subTitle":{"r":104,"g":86,"b":85},"text":{"r":251,"g":234,"b":234},"text2":{"r":188,"g":170,"b":170},"textShadow":{"r":20,"g":11,"b":11,"a":0.5},"textShadowProps":{"color":{"r":20,"g":11,"b":11,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":251,"g":174,"b":96},"textPop2":{"r":152,"g":149,"b":158},"meta":{"r":104,"g":86,"b":85},"metaHover":{"r":121,"g":100,"b":99},"icon":{"r":251,"g":174,"b":96},"iconSelected":{"r":251,"g":174,"b":96},"iconOver":{"r":251,"g":174,"b":96},"palette":[{"r":114,"g":24,"b":23},{"r":250,"g":159,"b":66},{"r":11,"g":110,"b":79},{"r":224,"g":224,"b":226},{"r":152,"g":149,"b":158}]}},"the-lensman":{"filter":{"$class":["passthrough"],"graph":"passthrough","config":null}},"itemsClasses":["site-footer-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-footer"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["Footer3col"]}}}</script><script type="text/javascript">
        window.theGridSiteType = 'permalink';
        var mountApp = dsNickJones.default.mountApp;
        mountApp(document.getElementById('app'), window.pageReactInitState);
        console.log('mounted app.');
        </script><script id="web-font-loader">
      if (window.WebFont) {
        WebFont.load({"google":{"families":["Roboto Slab:400,700","Roboto:400,400italic,700,700italic"]}});
      }
    </script></body></html>